<html class="no-js" lang="en">

  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Compartir Temas</title>
    <link rel="stylesheet" href="/stylesheets/foundation.css" />
    <link rel="stylesheet" href="/stylesheets/app.css" />
    <link rel="stylesheet" href="/stylesheets/navbar.css" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <script type="text/javascript" src="js/bootstrap-filestyle.min.js"> </script>
  </head>

  <body style="background-color: #f2f2f2;">
    <% currPage = "CT" %>
    <% include partials/navbar %>

    <div class="main" style="text-align: center;">

    <div class="header" style="padding-bottom: 0px;">
      Compartir Temas
    </div>

    <div class="row">
        <div class="small-5 small-centered medium-7 medium-centered large-7 large-centered columns">

            <form id="CT" action="javascript: sendData()" target="_self" onsubmit="" enctype="multipart/form-data">
                <div class="row column log-in-form" style="margin-top: 15px; text-align: left;">
                  <p style="font-family: Avenir-Medium; font-size:18px; display: none; color: red" id="emptyData">Por favor, complete el formulario</p>
                    <h4>Información Personal</h4>
                    <label><h6>Nombre</h6>
                        <input type="text" name="nombre" id="nombre" placeholder="">
                    </label>
                    <label><h6>Correo electrónico</h6>
                        <input type="text" name="correo" id="correo" placeholder="">
                    </label>
                    <label><h6>Nombre de la escuela</h6>
                        <input type="text" name="escuelaNombre" id="escuelaNombre" placeholder="">
                    </label>
                    <label><h6>Dirección de la escuela</h6>
                        <input type="text" name="direccion" id="direccion" placeholder="">
                    </label>
                    <label><h6>Puesto en la escuela</h6>
                        <input type="text" name="puesto" id="puesto" placeholder="">
                    </label>

                    <h4>El Tema</h4>
                    <label><h6>Nombre del tema</h6>
                        <input type="text" name="temaNombre" id="temaNombre" placeholder="">
                    </label>
                    <label><h6>Disciplina</h6>
                      <p style="margin:0;">Español, Matemáticas, Historia, Ciencias</p>
                        <input type="text" name="disciplina" id="disciplina" placeholder="">
                    </label>
                    <label><h6>Competencias</h6>
                      <p style="margin:0;">Ej. Leer con sentido, etc.</p>
                        <input type="text" name="comps" id="comps" placeholder="">
                    </label>
                    <label><h6>Introducción</h6>
                      <p style="margin:0;">Breve introducción al tema, propósitos específicos, preguntas de orientación</p>
                        <input type="text" name="intro" id="intro" placeholder="">
                    </label>
                    <label><h6>El desafió (el reto)</h6>
                        <input type="text" name="desafio" id="desafio" placeholder="">
                    </label>
                    <label><h6>Guíon</h6>
                        <input type="text" name="guion" id="guion" placeholder="">
                    </label>
                    <label><h6>Ejemplo de registro del tutor</h6>
                        <input type="text" name="tutor" id="tutor" placeholder="">
                    </label>
                    <label><h6>Ejemplo de registro del aprendiz</h6>
                        <input type="text" name="aprendiz" id="aprendiz" placeholder="">
                    </label>
                    <label><h6>Materiales de apoyo</h6>
                        <input type="text" name="materiales" id="materiales" placeholder="">
                    </label>

                    <label style="display: inline;">
                        <input type="file" class="filestyle" data-buttonText="Elija archivo" name="pdf" id="pdf" data-buttonName="button" data-iconName="glyphicon glyphicon-inbox" data-placeholder="Ningún file" style="display:inline;"> 
                    </label>
                    <p><input type="submit" class="mybutton" value="Enviar"></input></p> 
                </div>
            </form>
        </div>
    </div>

    <% var footerStyle = "position: relative" %>
    <% include partials/footer %>

    </div>

    <script type="text/javascript">
      function sendData(){
          var nombre = $('#nombre').val();
          var correo = $('#correo').val();
          var escuelaNombre = $('#escuelaNombre').val();
          var direccion = $('#direccion').val();
          var puesto = $('#puesto').val();
          var temaNombre = $('#temaNombre').val();
          var disciplina = $('#disciplina').val();
          var comps = $('#comps').val();
          var intro = $('#intro').val();
          var desafio = $('#desafio').val();
          var guion = $('#guion').val();
          var tutor = $('#tutor').val();
          var aprendiz = $('#aprendiz').val();
          var materiales = $('#materiales').val();
          var pdf = $('#pdf').val();
          var fields = [nombre, correo, escuelaNombre, direccion, puesto, temaNombre, disciplina, comps, intro, desafio, guion, tutor, aprendiz, materiales]
          var testing = (nombre == "Testing")

          if (!testing) {
            for (var i = 0; i < fields.length; i++) {
              if (!/\S/.test(fields[i])) {
                document.getElementById('emptyData').style.display='block';
                return false;
              }
            }

            var entries = [
              '30967365',
              '1383858647',
              '1700156111',
              '482774097',
              '1768614129',
              '809406638',
              '837674048',
              '19163486',
              '1511719233',
              '399020090',
              '2003391576',
              '831806500',
              '1670527536',
              '62431838'
            ]

            var entryData = {}
            for (var i = 0; i < fields.length; i++) {
              var entryCode = 'entry.' + entries[i]
              entryData[entryCode] = fields[i]
            }
          
            $.ajax({
                url: "https://docs.google.com/forms/d/10n_zREEJmIzGhZOCgbDdjt5Mv61DilkwTCocwWOKJkE/formResponse",
                data: entryData,
                type: "POST",
                dataType: "xml",
                crossDomain: true,
                statusCode: {
                    0: function (){

                        //Success message
                    },
                    200: function (){

                        //Success Message
                    }
                }
            });

          }

          var formData = new FormData();
          formData.append('file', $('#pdf')[0].files[0]);

          $.ajax({
              type: "POST",
              url: 'http://aprenderconinteres.org/CompartirTemas/',
              processData: false,
              contentType: false,
              data: formData,
              success: function () {
                
            }
          });

          return false;
          
          
      }
    </script>

  </body>
</html>